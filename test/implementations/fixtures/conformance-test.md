# Spatial Index Conformance Test Fixtures

This file contains ASCII-art test fixtures that serve as both **documentation** and **test data** for spatial index implementations.

---

## Test: LWW Example

**Purpose**: Last-writer-wins conflict resolution

```ascii
    A   B   C   D  
  +---+---+---+---+
0 |   | B | B | B |
  +---+---+---+---+
1 | R | B | B | B |
  +---+---+---+---+
2 | R | B | B | B |
  +---+---+---+---+
3 |   |   |   |   |
  +---+---+---+---+

B = "BLUE"
R = "RED"
```

---

## Test: Single Rectangle

**Purpose**: Basic insert and render

```ascii
    A   B   C   D   E  
  +---+---+---+---+---+
0 |   |   |   |   |   |
  +---+---+---+---+---+
1 |   | T | T | T |   |
  +---+---+---+---+---+
2 |   | T | T | T |   |
  +---+---+---+---+---+
3 |   |   |   |   |   |
  +---+---+---+---+---+

T = "TEST"
```

---

## Test: Adjacent Non-Overlapping

**Purpose**: Adjacent rectangles remain separate

```ascii
    A   B   C   D  
  +---+---+---+---+
0 | A | A | B | B |
  +---+---+---+---+
1 | A | A | B | B |
  +---+---+---+---+
2 | C | C | D | D |
  +---+---+---+---+
3 | C | C | D | D |
  +---+---+---+---+

A = "A"
B = "B"
C = "C"
D = "D"
```

---

## Test: Viewport Offset

**Purpose**: Rendering with viewport offset

```ascii
    F   G   H   I  
  +---+---+---+---+
5 | D | D | D |   |
  +---+---+---+---+
6 | D | D | D |   |
  +---+---+---+---+
7 | D | D | D |   |
  +---+---+---+---+
8 |   |   |   |   |
  +---+---+---+---+

D = "DATA"
```

---

## Test: Empty Index

**Purpose**: Rendering empty index

```ascii
    A   B   C  
  +---+---+---+
0 |   |   |   |
  +---+---+---+
1 |   |   |   |
  +---+---+---+
2 |   |   |   |
  +---+---+---+
```

---

## Test: Horizontal Stripes

**Purpose**: Multiple horizontal non-overlapping rectangles

```ascii
    A   B   C   D   E  
  +---+---+---+---+---+
0 | A |   | B |   | C |
  +---+---+---+---+---+
1 | A |   | B |   | C |
  +---+---+---+---+---+
2 | A |   | B |   | C |
  +---+---+---+---+---+
3 | A |   | B |   | C |
  +---+---+---+---+---+

A = "A"
B = "B"
C = "C"
```

---

## Test: Simple Grid Parse

**Purpose**: Parsing simple grid structure

```ascii
    A   B   C  
  +---+---+---+
0 | R | R |   |
  +---+---+---+
1 | R | B | B |
  +---+---+---+

B = "BLUE"
R = "RED"
```

---

## Test: Offset Viewport Parse

**Purpose**: Parsing with viewport offset

```ascii
    E   F   G  
  +---+---+---+
3 | A | B | C |
  +---+---+---+
4 | D | E | F |
  +---+---+---+

A = "alpha"
B = "bravo"
C = "charlie"
D = "delta"
E = "echo"
F = "foxtrot"
```

---

## Test: Extract Rectangles

**Purpose**: Extracting multiple rectangles from grid

```ascii
    A   B   C   D  
  +---+---+---+---+
0 | R | R |   |   |
  +---+---+---+---+
1 | R | R | B | B |
  +---+---+---+---+

B = "BLUE"
R = "RED"
```

---

## Test: Complex Fragmentation (numeric values)

**Purpose**: Fragmentation with numeric values

```ascii
    A   B   C   D   E  
  +---+---+---+---+---+
0 | 1 | 1 | 1 | 1 | 1 |
  +---+---+---+---+---+
1 | 1 | 1 | 1 | 1 | 1 |
  +---+---+---+---+---+
2 | 1 | 1 | 2 | 1 | 1 |
  +---+---+---+---+---+
3 | 1 | 1 | 1 | 3 | 3 |
  +---+---+---+---+---+
4 | 1 | 1 | 1 | 3 | 3 |
  +---+---+---+---+---+

1 = 1
2 = 2
3 = 3
```

---

## Test: Diagonal Pattern (numeric values)

**Purpose**: Diagonal insertion pattern

```ascii
    A   B   C   D   E  
  +---+---+---+---+---+
0 | 1 |   |   |   |   |
  +---+---+---+---+---+
1 |   | 2 |   |   |   |
  +---+---+---+---+---+
2 |   |   | 3 |   |   |
  +---+---+---+---+---+
3 |   |   |   | 4 |   |
  +---+---+---+---+---+
4 |   |   |   |   | 5 |
  +---+---+---+---+---+

1 = 1
2 = 2
3 = 3
4 = 4
5 = 5
```

---

## Test: Progressive Overlap (numeric values)

**Purpose**: Progressive overlapping insertions

```ascii
    A   B   C   D   E  
  +---+---+---+---+---+
0 | 1 | 1 | 1 | 1 |   |
  +---+---+---+---+---+
1 | 1 | 1 | 2 | 2 | 2 |
  +---+---+---+---+---+
2 | 1 | 3 | 3 | 3 | 2 |
  +---+---+---+---+---+
3 |   | 3 | 3 | 3 | 2 |
  +---+---+---+---+---+
4 |   | 3 | 3 | 3 |   |
  +---+---+---+---+---+

1 = 1
2 = 2
3 = 3
```

---

## Test: Overlap Resolution

**Purpose**: Small rectangle overlaps larger, fragments created

```ascii
    A   B   C   D   E  
  +---+---+---+---+---+
0 |   |   |   |   |   |
  +---+---+---+---+---+
1 |   | f | f | f | f |
  +---+---+---+---+---+
2 |   | f | s | s | f |
  +---+---+---+---+---+
3 |   | f | s | s | f |
  +---+---+---+---+---+
4 |   | f | f | f | f |
  +---+---+---+---+---+

f = "first"
s = "second"
```

---

## Test: Last Writer Wins

**Purpose**: Insertion order matters - last writer wins overlaps

```ascii
    A   B   C   D  
  +---+---+---+---+
0 |   |   |   |   |
  +---+---+---+---+
1 |   | f | f |   |
  +---+---+---+---+
2 |   | f | s | s |
  +---+---+---+---+
3 |   |   | s | s |
  +---+---+---+---+

f = "first"
s = "second"
```

---

## Test: Non-Overlapping Preservation

**Purpose**: Separate rectangles remain intact

```ascii
    A   B   C   D   E   F   G   H  
  +---+---+---+---+---+---+---+---+
0 |   |   |   |   |   |   |   |   |
  +---+---+---+---+---+---+---+---+
1 |   | f | f |   |   |   |   |   |
  +---+---+---+---+---+---+---+---+
2 |   | f | f |   |   |   |   |   |
  +---+---+---+---+---+---+---+---+
3 |   |   |   |   |   |   |   |   |
  +---+---+---+---+---+---+---+---+
4 |   |   |   |   |   |   |   |   |
  +---+---+---+---+---+---+---+---+
5 |   |   |   |   |   | s | s |   |
  +---+---+---+---+---+---+---+---+
6 |   |   |   |   |   | s | s |   |
  +---+---+---+---+---+---+---+---+
7 |   |   |   |   |   |   |   |   |
  +---+---+---+---+---+---+---+---+

f = "first"
s = "second"
```

---

## Test: Fragment Generation (4-split)

**Purpose**: Center overlap creates 4 base fragments (top, right, bottom, left)

```ascii
    A   B   C   D   E   F   G   H   I   J  
  +---+---+---+---+---+---+---+---+---+---+
0 | b | b | b | b | b | b | b | b | b | b |
  +---+---+---+---+---+---+---+---+---+---+
1 | b | b | b | b | b | b | b | b | b | b |
  +---+---+---+---+---+---+---+---+---+---+
2 | b | b | b | b | b | b | b | b | b | b |
  +---+---+---+---+---+---+---+---+---+---+
3 | b | b | b | c | c | c | c | b | b | b |
  +---+---+---+---+---+---+---+---+---+---+
4 | b | b | b | c | c | c | c | b | b | b |
  +---+---+---+---+---+---+---+---+---+---+
5 | b | b | b | c | c | c | c | b | b | b |
  +---+---+---+---+---+---+---+---+---+---+
6 | b | b | b | c | c | c | c | b | b | b |
  +---+---+---+---+---+---+---+---+---+---+
7 | b | b | b | b | b | b | b | b | b | b |
  +---+---+---+---+---+---+---+---+---+---+
8 | b | b | b | b | b | b | b | b | b | b |
  +---+---+---+---+---+---+---+---+---+---+
9 | b | b | b | b | b | b | b | b | b | b |
  +---+---+---+---+---+---+---+---+---+---+

b = "base"
c = "center"
```

---

## Test: L-Shaped Overlap

**Purpose**: Offset overlap creates L-shaped base fragments

```ascii
     A   B   C   D   E   F   G   H   I   J   K   L   M   N   O  
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
 0 | b | b | b | b | b | b | b | b | b | b |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
 1 | b | b | b | b | b | b | b | b | b | b |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
 2 | b | b | b | b | b | b | b | b | b | b |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
 3 | b | b | b | b | b | b | b | b | b | b |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
 4 | b | b | b | b | b | b | b | b | b | b |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
 5 | b | b | b | b | b | o | o | o | o | o | o | o | o | o | o |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
 6 | b | b | b | b | b | o | o | o | o | o | o | o | o | o | o |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
 7 | b | b | b | b | b | o | o | o | o | o | o | o | o | o | o |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
 8 | b | b | b | b | b | o | o | o | o | o | o | o | o | o | o |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
 9 | b | b | b | b | b | o | o | o | o | o | o | o | o | o | o |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
10 |   |   |   |   |   | o | o | o | o | o | o | o | o | o | o |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
11 |   |   |   |   |   | o | o | o | o | o | o | o | o | o | o |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
12 |   |   |   |   |   | o | o | o | o | o | o | o | o | o | o |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
13 |   |   |   |   |   | o | o | o | o | o | o | o | o | o | o |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
14 |   |   |   |   |   | o | o | o | o | o | o | o | o | o | o |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

b = "base"
o = "overlap"
```

---

## Test: Adjacent Horizontal Ranges

**Purpose**: Half-open interval semantics - horizontally adjacent ranges don't overlap

```ascii
    A   B   C   D   E   F   G   H   I   J
  +---+---+---+---+---+---+---+---+---+---+
0 | l | l | l | l | l | r | r | r | r | r |
  +---+---+---+---+---+---+---+---+---+---+
1 | l | l | l | l | l | r | r | r | r | r |
  +---+---+---+---+---+---+---+---+---+---+
2 | l | l | l | l | l | r | r | r | r | r |
  +---+---+---+---+---+---+---+---+---+---+
3 | l | l | l | l | l | r | r | r | r | r |
  +---+---+---+---+---+---+---+---+---+---+
4 | l | l | l | l | l | r | r | r | r | r |
  +---+---+---+---+---+---+---+---+---+---+
5 | l | l | l | l | l | r | r | r | r | r |
  +---+---+---+---+---+---+---+---+---+---+
6 | l | l | l | l | l | r | r | r | r | r |
  +---+---+---+---+---+---+---+---+---+---+
7 | l | l | l | l | l | r | r | r | r | r |
  +---+---+---+---+---+---+---+---+---+---+
8 | l | l | l | l | l | r | r | r | r | r |
  +---+---+---+---+---+---+---+---+---+---+
9 | l | l | l | l | l | r | r | r | r | r |
  +---+---+---+---+---+---+---+---+---+---+

l = "left"
r = "right"
```

---

## Test: Adjacent Vertical Ranges

**Purpose**: Half-open interval semantics - vertically adjacent ranges don't overlap

```ascii
    A   B   C   D   E   F   G   H   I   J
  +---+---+---+---+---+---+---+---+---+---+
0 | t | t | t | t | t | t | t | t | t | t |
  +---+---+---+---+---+---+---+---+---+---+
1 | t | t | t | t | t | t | t | t | t | t |
  +---+---+---+---+---+---+---+---+---+---+
2 | t | t | t | t | t | t | t | t | t | t |
  +---+---+---+---+---+---+---+---+---+---+
3 | t | t | t | t | t | t | t | t | t | t |
  +---+---+---+---+---+---+---+---+---+---+
4 | t | t | t | t | t | t | t | t | t | t |
  +---+---+---+---+---+---+---+---+---+---+
5 | b | b | b | b | b | b | b | b | b | b |
  +---+---+---+---+---+---+---+---+---+---+
6 | b | b | b | b | b | b | b | b | b | b |
  +---+---+---+---+---+---+---+---+---+---+
7 | b | b | b | b | b | b | b | b | b | b |
  +---+---+---+---+---+---+---+---+---+---+
8 | b | b | b | b | b | b | b | b | b | b |
  +---+---+---+---+---+---+---+---+---+---+
9 | b | b | b | b | b | b | b | b | b | b |
  +---+---+---+---+---+---+---+---+---+---+

b = "bottom"
t = "top"
```

---

## Test: Adjacent Corner Ranges

**Purpose**: Half-open interval semantics - four ranges meeting at corner don't overlap

```ascii
    A   B   C   D   E   F   G   H   I   J
  +---+---+---+---+---+---+---+---+---+---+
0 | A | A | A | A | A | B | B | B | B | B |
  +---+---+---+---+---+---+---+---+---+---+
1 | A | A | A | A | A | B | B | B | B | B |
  +---+---+---+---+---+---+---+---+---+---+
2 | A | A | A | A | A | B | B | B | B | B |
  +---+---+---+---+---+---+---+---+---+---+
3 | A | A | A | A | A | B | B | B | B | B |
  +---+---+---+---+---+---+---+---+---+---+
4 | A | A | A | A | A | B | B | B | B | B |
  +---+---+---+---+---+---+---+---+---+---+
5 | C | C | C | C | C | D | D | D | D | D |
  +---+---+---+---+---+---+---+---+---+---+
6 | C | C | C | C | C | D | D | D | D | D |
  +---+---+---+---+---+---+---+---+---+---+
7 | C | C | C | C | C | D | D | D | D | D |
  +---+---+---+---+---+---+---+---+---+---+
8 | C | C | C | C | C | D | D | D | D | D |
  +---+---+---+---+---+---+---+---+---+---+
9 | C | C | C | C | C | D | D | D | D | D |
  +---+---+---+---+---+---+---+---+---+---+

A = "A"
B = "B"
C = "C"
D = "D"
```

---

## Test: Global Range Override

**Purpose**: Global range (infinite bounds) overrides all existing ranges

```ascii
    A   B   C   D   E
  +---+---+---+---+---+
0 | G | G | G | G | G |
  +---+---+---+---+---+
1 | G | G | G | G | G |
  +---+---+---+---+---+
2 | G | G | G | G | G |
  +---+---+---+---+---+
3 | G | G | G | G | G |
  +---+---+---+---+---+
4 | G | G | G | G | G |
  +---+---+---+---+---+

G = "global"
```

---

## Test: Query Boundary Precision

**Purpose**: Half-open interval boundary precision - range at [10,20) occupies coords 10-19

```ascii
     I   J   K   L   M   N   O   P   Q   R   S   T   U   V
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+
 8 |   |   |   |   |   |   |   |   |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+
 9 |   |   |   |   |   |   |   |   |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+
10 |   |   | T | T | T | T | T | T | T | T | T | T |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+
11 |   |   | T | T | T | T | T | T | T | T | T | T |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+
12 |   |   | T | T | T | T | T | T | T | T | T | T |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+
13 |   |   | T | T | T | T | T | T | T | T | T | T |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+
14 |   |   | T | T | T | T | T | T | T | T | T | T |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+
15 |   |   | T | T | T | T | T | T | T | T | T | T |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+
16 |   |   | T | T | T | T | T | T | T | T | T | T |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+
17 |   |   | T | T | T | T | T | T | T | T | T | T |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+
18 |   |   | T | T | T | T | T | T | T | T | T | T |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+
19 |   |   | T | T | T | T | T | T | T | T | T | T |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+
20 |   |   |   |   |   |   |   |   |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+
21 |   |   |   |   |   |   |   |   |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+

T = "test"
```

---

## Test: Boundary Conditions

**Purpose**: Edge cases - single-cell, single-row, single-column, at-origin

```ascii
     A   B   C   D   E   F   G   H   I   J   K   L   M
   +---+---+---+---+---+---+---+---+---+---+---+---+---+
 0 | O | O | O | O | O |   | V |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+
 1 | O | O | O | O | O |   | V |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+
 2 | O | O | O | O | O |   | V |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+
 3 | O | O | O | O | O |   | V |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+
 4 | O | O | O | O | O |   | V |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+
 5 |   |   |   |   |   | P | V |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+
 6 |   |   |   |   |   |   | V |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+
 7 |   |   |   |   |   |   | V |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+
 8 |   |   |   |   |   |   | V |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+
 9 |   |   |   |   |   |   | V |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+
10 | H | H | H | H | H | H | V | H | H | H | H | H | H |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+
11 |   |   |   |   |   |   | V |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+
12 |   |   |   |   |   |   | V |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+---+---+---+---+---+

H = "horizontal"
O = "origin"
P = "point"
V = "vertical"
```

---

## Test: Infinite Ranges

**Purpose**: Infinite strips with finite viewport - shows how infinite ranges interact with boundaries

```ascii
    A   B   C   D   E   F   G   H   I   J
  +---+---+---+---+---+---+---+---+---+---+
0 |   |   |   |   | V | V | V |   |   |   |
  +---+---+---+---+---+---+---+---+---+---+
1 |   |   |   |   | V | V | V |   |   |   |
  +---+---+---+---+---+---+---+---+---+---+
2 |   |   |   |   | V | V | V |   |   |   |
  +---+---+---+---+---+---+---+---+---+---+
3 |   |   |   |   | V | V | V |   |   |   |
  +---+---+---+---+---+---+---+---+---+---+
4 |   |   |   |   | V | V | V |   |   |   |
  +---+---+---+---+---+---+---+---+---+---+
5 | H | H | H | H | H | H | H | H | H | H |
  +---+---+---+---+---+---+---+---+---+---+
6 | H | H | H | H | H | H | H | H | H | H |
  +---+---+---+---+---+---+---+---+---+---+
7 | H | H | H | H | H | H | H | H | H | H |
  +---+---+---+---+---+---+---+---+---+---+
8 |   |   |   |   | V | V | V |   |   |   |
  +---+---+---+---+---+---+---+---+---+---+
9 |   |   |   |   | V | V | V |   |   |   |
  +---+---+---+---+---+---+---+---+---+---+

H = "horizontal"
V = "vertical"
```

---

## Usage

These fixtures are parsed by `packages/@local/spandex-testing/src/ascii/fixtures.ts` and used by conformance tests.
